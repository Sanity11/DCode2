package com.audio{	import flash.display.Sprite;	import flash.events.*;	import flash.media.*;	import flash.display.Loader;	import flash.net.URLRequest;	import com.greensock.TweenMax;		public class Audio extends Sound	{		//Controls		private var soundController		:Sprite;		private var soundControllerPlay	:Sprite;		private var soundControllerStop	:Sprite;				//Sound		private var sound				:Sound;		private var soundTransformer	:SoundTransform;		private var soundChannel		:SoundChannel;				private var soundClicked 		:Boolean = false;				private var off					:Boolean = false;				public function Audio():void		{			super();		}			public function createSoundController(path:String, X:int, Y:int, on:Boolean = true):Sprite 		{			off = on;				            soundController = new Sprite();            soundController.buttonMode = true;            soundController.addEventListener(MouseEvent.CLICK, mySoundControllerClicked);            soundController.x = X;            soundController.y = Y;            //addChild(soundController);            soundControllerPlay = new Sprite();            soundController.addChild(soundControllerPlay);            var soundControllerPlayLoader:Loader = new Loader();            soundControllerPlayLoader.load(new URLRequest('http://webontwikkel.agh-friends.com/epoc/images/images_style/sound.png'));            soundControllerPlay.addChild(soundControllerPlayLoader);            soundControllerStop = new Sprite();            soundController.addChild(soundControllerStop);            var soundControllerStopLoader:Loader = new Loader();            soundControllerStopLoader.load(new URLRequest('http://webontwikkel.agh-friends.com/epoc/images/images_style/sound_none.png'));            soundControllerStop.addChild(soundControllerStopLoader);            loadSound(path);			return soundController;        }        private function loadSound(path:String):void 		{        	sound = new Sound(new URLRequest(path));        	soundChannel = new SoundChannel();        	soundTransformer = new SoundTransform(0);        	soundChannel = sound.play(0, 99999, soundTransformer);//The sound will start from 0 millisecond, will loop 99999 times and will use the my_sound_transform SoundTransform        	fadeIn();        }        private function updateChannel():void 		{            soundChannel.soundTransform = soundTransformer;        }        private function fadeIn():void 		{			if(off)			{            	soundControllerPlay.visible = true;            	soundControllerStop.visible = false;            	TweenMax.to(soundTransformer, 3, {volume:1, onUpdate:updateChannel});			}        }        private function mySoundControllerClicked(e:MouseEvent):void 		{            if (soundClicked) 			{                trace("Fade In Sound");                TweenMax.to(soundTransformer, 3, {volume:1, onUpdate:updateChannel});                soundControllerPlay.visible = true;                soundControllerStop.visible = false;                soundClicked = false;            } 			else 			{                trace("Fade Out Sound");                TweenMax.to(soundTransformer, 3, {volume:0, onUpdate:updateChannel});                soundControllerPlay.visible = false;                soundControllerStop.visible = true;                soundClicked = true;            }        } 	}}