/* ------------------------------------------/* Preloader/*/* Author: Dion Snoeijen/* Date: 17-05-2010/*/* Preloader Frame/*/* ------------------------------------------ */package com.tools{	import com.graphics.asset.Asset;	import com.greensock.TweenMax;	import com.data.GlobalDataContainer;		import flash.display.Sprite;	import flash.display.Stage;	import flash.text.Font;		public class Preloader extends Sprite	{		private var total			:int;		private var counter			:int;				private var targetStage		:Stage;		private var blankScreen		:Asset;		private var font 			:String;		private var embed			:Boolean;				private var preloaderPath	:String;				private var color			:uint;				//private var globalFont		:Class;				public function Preloader(cStage:Stage, totalToBeLoaded:int, preloaderIcon:String = '', pColor:uint = 0xFFFFFF, pEmbed:Boolean = false):void		{			total = totalToBeLoaded;			targetStage = cStage;			color = pColor;			embed = pEmbed;			createPreloaderGraphics();		}				private function createPreloaderGraphics():void		{				this.blankScreen = new Asset(Asset.RECT, this.targetStage.stageWidth, this.targetStage.stageHeight, color, 1, false);			this.blankScreen.setText({}, GlobalDataContainer.vars.cssPath, '<b>LOADING 0%</b>', embed);						this.addChild(this.blankScreen);		}				public function count():void		{			this.counter++;			var percentLoaded:Number = counter / total;			percentLoaded = Math.round(percentLoaded * 100);						this.blankScreen.setText({}, GlobalDataContainer.vars.cssPath, '<b>LOADING ' + String(percentLoaded) + '%</b>', embed);			this.blankScreen.tf.x = targetStage.stageWidth / 2;			this.blankScreen.tf.y = targetStage.stageHeight / 2;						if(counter == total)			{				trace('Preloading done, removing graphics.');				//blankScreen.fadeOut();				TweenMax.to(this.blankScreen, 1, {alpha:0, onComplete:removePreloaderFromStage});			}		}				private function removePreloaderFromStage():void		{			this.removeChild(this.blankScreen);					}	}}